(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))a(t);new MutationObserver(t=>{for(const d of t)if(d.type==="childList")for(const r of d.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&a(r)}).observe(document,{childList:!0,subtree:!0});function n(t){const d={};return t.integrity&&(d.integrity=t.integrity),t.referrerPolicy&&(d.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?d.credentials="include":t.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function a(t){if(t.ep)return;t.ep=!0;const d=n(t);fetch(t.href,d)}})();const g=[{name:"USA",countryCode:"US"},{name:"Andorra",countryCode:"AD"},{name:"Anguilla",countryCode:"AI"},{name:"Argentina",countryCode:"AR"},{name:"Australia",countryCode:"AU"},{name:"Austria",countryCode:"AT"},{name:"Azerbaijan",countryCode:"AZ"},{name:"Bahamas",countryCode:"BS"},{name:"Bahrain",countryCode:"BH"},{name:"Barbados",countryCode:"BB"},{name:"Belgium",countryCode:"BE"},{name:"Bermuda",countryCode:"BM"},{name:"Brazil",countryCode:"BR"},{name:"Bulgaria",countryCode:"BG"},{name:"Canada",countryCode:"CA"},{name:"Chile",countryCode:"CL"},{name:"China",countryCode:"CN"},{name:"Colombia",countryCode:"CO"},{name:"Costa Rica",countryCode:"CR"},{name:"Croatia",countryCode:"HR"},{name:"Cyprus",countryCode:"CY"},{name:"Czech Republic",countryCode:"CZ"},{name:"Denmark",countryCode:"DK"},{name:"Dominican Republic",countryCode:"DO"},{name:"Ecuador",countryCode:"EC"},{name:"Estonia",countryCode:"EE"},{name:"Faroe Islands",countryCode:"FO"},{name:"Finland",countryCode:"FI"},{name:"France",countryCode:"FR"},{name:"Georgia",countryCode:"GE"},{name:"Germany",countryCode:"DE"},{name:"Ghana",countryCode:"GH"},{name:"Gibraltar",countryCode:"GI"},{name:"Great Britain",countryCode:"GB"},{name:"Greece",countryCode:"GR"},{name:"Hong Kong",countryCode:"HK"},{name:"Hungary",countryCode:"HU"},{name:"Iceland",countryCode:"IS"},{name:"India",countryCode:"IN"},{name:"Ireland",countryCode:"IE"},{name:"Israel",countryCode:"IL"},{name:"Italy",countryCode:"IT"},{name:"Jamaica",countryCode:"JM"},{name:"Japan",countryCode:"JP"},{name:"Korea, Republic of",countryCode:"KR"},{name:"Latvia",countryCode:"LV"},{name:"Lebanon",countryCode:"LB"},{name:"Lithuania",countryCode:"LT"},{name:"Luxembourg",countryCode:"LU"},{name:"Malaysia",countryCode:"MY"},{name:"Malta",countryCode:"MT"},{name:"Mexico",countryCode:"MX"},{name:"Monaco",countryCode:"MC"},{name:"Montenegro",countryCode:"ME"},{name:"Morocco",countryCode:"MA"},{name:"Netherlands",countryCode:"NL"},{name:"Netherlands Antilles",countryCode:"AN"},{name:"New Zealand",countryCode:"NZ"},{name:"Northern Ireland",countryCode:"ND"},{name:"Norway",countryCode:"NO"},{name:"Peru",countryCode:"PE"},{name:"Poland",countryCode:"PL"},{name:"Portugal",countryCode:"PT"},{name:"Romania",countryCode:"RO"},{name:"Russian Federation",countryCode:"RU"},{name:"Saint Lucia",countryCode:"LC"},{name:"Saudi Arabia",countryCode:"SA"},{name:"Serbia",countryCode:"RS"},{name:"Singapore",countryCode:"SG"},{name:"Slovakia",countryCode:"SK"},{name:"Slovenia",countryCode:"SI"},{name:"South Africa",countryCode:"ZA"},{name:"Spain",countryCode:"ES"},{name:"Sweden",countryCode:"SE"},{name:"Switzerland",countryCode:"CH"},{name:"Taiwan",countryCode:"TW"},{name:"Thailand",countryCode:"TH"},{name:"Trinidad and Tobago",countryCode:"TT"},{name:"Turkey",countryCode:"TR"},{name:"Ukraine",countryCode:"UA"},{name:"United Arab Emirates",countryCode:"AE"},{name:"Uruguay",countryCode:"UY"},{name:"Venezuela",countryCode:"VE"}];function C(e,o){const n=document.querySelector(".pagination");n.innerHTML="";const a=(t,d=t)=>`<li class="pagination-button ${t===e?"active":""}" data-page="${t}">${d}</li>`;e>3&&(n.insertAdjacentHTML("beforeend",a(1)),e>4&&n.insertAdjacentHTML("beforeend",'<li class="dots">...</li>'));for(let t=e-2;t<=e+2;t++)t>0&&t<=o&&n.insertAdjacentHTML("beforeend",a(t))}document.querySelector(".pagination").addEventListener("click",e=>{if(e.target.classList.contains("pagination-button")){const o=parseInt(e.target.dataset.page);isNaN(o)||i(o)}});function m(e){const o=document.querySelector(".cards");if(o.innerHTML="",e==="Data not found!"){o.insertAdjacentHTML("beforeend",`<h1 class="error">${e} Please, try something else!</h1>`);return}e._embedded.events.forEach(n=>{o.insertAdjacentHTML("beforeend",`
      <li class="cards-item" data-id="${n.id}">
        <div class="cards-deco"></div>
        <img src="${n.images.find(a=>a.width===640&&a.height===427).url}" class="cards-image">
        <h2 class="cards-title">${n.name}</h2>
        <p class="cards-date">${n.dates.start.localDate}</p>
        <p class="cards-place">${n._embedded.venues[0].name||"Not found :("}</p>
      </li> 
      `)})}async function i(e){const o=document.querySelector(".dropdown-toggle").textContent,n=document.querySelector(".header-input").value;try{let a;if(o==="Choose country"){n!==""?a=await fetch(`https://app.ticketmaster.com/discovery/v2/events.json?size=20&keyword=${n}&page=${e}&apikey=jb8WuckSdZIt1NKg3N7OLggB11Jhj1L2`):a=await fetch(`https://app.ticketmaster.com/discovery/v2/events.json?size=20&page=${e}&apikey=jb8WuckSdZIt1NKg3N7OLggB11Jhj1L2`);const t=await a.json();m(t),C(t.page.number+1,t.page.totalPages)}else{const t=g.find(f=>f.name===o).countryCode;let d;n!==""?d=await fetch(`https://app.ticketmaster.com/discovery/v2/events.json?size=20&keyword=${n}&countryCode=${t}&page=${e}&apikey=jb8WuckSdZIt1NKg3N7OLggB11Jhj1L2`):d=await fetch(`https://app.ticketmaster.com/discovery/v2/events.json?size=20&countryCode=${t}&page=${e}&apikey=jb8WuckSdZIt1NKg3N7OLggB11Jhj1L2`);const r=await d.json();m(r),C(r.page.number+1,r.page.totalPages)}}catch{m("Data not found!")}}const y=document.querySelector(".dropdown-toggle"),c=document.querySelector(".dropdown-menu"),h=document.querySelector(".header-input");function v(e){e.textContent==="All"?y.textContent="Choose country":y.textContent=e.textContent,i(1),c.classList.toggle("show")}function b(){g.forEach(e=>{c.insertAdjacentHTML("beforeend",`<div class="dropdown-item">${e.name}</div>`)}),c.insertAdjacentHTML("afterbegin","<div class='dropdown-item'>All</div>"),y.addEventListener("click",()=>{c.classList.toggle("show")}),c.addEventListener("click",e=>{e.target.className==="dropdown-item"&&v(e.target)})}function L(){h.addEventListener("input",()=>i(1))}const u=document.querySelector(".modal"),s=document.querySelector(".backdrop"),S=document.querySelector(".header-input"),A=document.querySelector(".modal-close-btn"),N=document.querySelector(".cards");function T(e){const o=document.querySelector(".modal-img"),n=document.querySelector(".modal-wrap-img"),a=document.querySelector(".modal-list");if(a.innerHTML="",n.src=e._embedded.events[0].images.find(t=>t.width===640&&t.height===427).url,o.src=e._embedded.events[0].images.find(t=>t.width===205&&t.height===115).url,e==="Data not found!"){a.insertAdjacentHTML("beforeend",`<h1 class="error">${e} Please, try something else!</h1>`);return}a.insertAdjacentHTML("beforeend",`
            <li class="modal-list-item">
              <h2 class="modal-list-title">WHEN</h2>
              <p class="modal-list-desc">${e._embedded.events[0].dates.start.localDate===void 0?"Not found":e._embedded.events[0].dates.start.localDate}</p>
              <p class="modal-list-desc time-desc">${e._embedded.events[0].dates.start.localTime===void 0?"Not found":e._embedded.events[0].dates.start.localTime}(${e._embedded.events[0].dates.timezone===void 0?"Not found":e._embedded.events[0].dates.timezone})</p>
            </li>
            <li class="modal-list-item">
              <h2 class="modal-list-title">WHERE</h2>
              <p class="modal-list-desc">${e._embedded.events[0].dates.timezone===void 0?"Not found":e._embedded.events[0].dates.timezone}</p>
              <p class="modal-list-desc location-desc">${e._embedded.events[0]._embedded.venues[0].name===void 0?"Not found":e._embedded.events[0]._embedded.venues[0].name}</p>
            </li>
            <li class="modal-list-item">
              <h2 class="modal-list-title">WHO</h2>
              <p class="modal-list-desc author-desc">${e._embedded.events[0]._embedded.attractions[0].name===void 0?"Not found":e._embedded.events[0]._embedded.attractions[0].name}</p>
            </li>
            `)}async function p(e){let o;o=await fetch(`https://app.ticketmaster.com/discovery/v2/events.json?id=${e}&apikey=jb8WuckSdZIt1NKg3N7OLggB11Jhj1L2`);const n=await o.json();T(n),u.style.display="block",s.style.display="block",setTimeout(()=>{u.style.opacity="1",s.style.opacity="1"},200)}function l(){u.style.opacity="0",s.style.opacity="0",setTimeout(()=>{u.style.display="none",s.style.display="none"},400)}function E(e){e.currentTarget===e.target&&l()}function M(e){e.key==="Escape"&&l()}N.addEventListener("click",e=>{e.target.tagname!=="UL"&&(e.target.tagname==="LI"?p(e.target.getAttribute("data-id")):p(e.target.parentElement.getAttribute("data-id")))});function k(){document.querySelector(".modal-author-btn").addEventListener("click",w),s.addEventListener("click",E),document.addEventListener("keyup",M),A.addEventListener("click",l)}function w(e){S.value=e.target.parentElement.children[1].querySelector(".author-desc").innerHTML,i(1),l()}b();L();k();i(1);setTimeout(()=>{document.querySelector(".overlay").classList.add("hidden"),document.querySelector(".cards").classList.remove("hidden")},1700);
